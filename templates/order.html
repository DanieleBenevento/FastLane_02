{% extends "layout.html" %}

{% block content %}

<script>

    function order_session(order_id) {
        alert(order_id)
        window.sessionStorage.setItem('order_id', order_id)
        alert('sessione salvata! session[order_id]='+sessionStorage.getItem('order_id'))
    }

</script>

<div class="row">
    <div class="col-sm-3" style="padding-left: 4%; border-right: 1px inset #333; padding-bottom: 3%">

            {% if session.get('email') and session['type'] == 'COMPANY' and session.get('username_user') %}
                <h4 style=" padding-bottom: 3%">Welcome {{ session['name_employee'] }}</h4>
            {% elif session.get('email') and session['type'] == 'PRIVATE' %}
                <h4 style=" padding-bottom: 3%">Welcome {{ session['id_user'] }}</h4>
            {% endif %}

                <!-- ***************** PROFILE PIC *************** -->


                        <img src="/static/img/billgates.png" class="img-circle">
                        <h6 style="padding-top: 3%;"> Role: {{ session['role_employee'] }} - {{ session['department_employee'] }}</h6>
                         <a href="/upload" style="color: gold">Upload your profile picture</a>

    </div>

  <div class="col-sm-9" style="padding-right: 4%; padding-left: 3%">


        <!-- *********************** ORDERS TABLE ************************* -->

        <h3 style="padding-bottom: 3%">Your current orders</h3>
    <form action="" method="post">
        <div class="table-sm">
        <table class="table table-striped table-hover" style="background-color: floralwhite; border: #16181b;">
              <thead style="background-color: black; color: floralwhite;">
                <tr>
                  <th scope="col">ID</th>
                  <th scope="col">Description</th>
                  <th scope="col">User</th>
                  <th scope="col">Customer</th>
                  <th scope="col">Delivery date</th>
                  <th scope="col">Status</th>
                  <th scope="col" style="background-color: transparent"></th>
                </tr>
              </thead>
            <tbody>

            {% for order in orders %}
                <tr><th>{{ order.order_id }}</th>
                <td>{{ order.order_description }}</td>
                <td>{{ order.user }}</td>
                <td>{{ order.order_private_customer }}</td>
                <td>{{ order.order_delivery_date }}</td>
                <td>{{ order.order_state }}</td>
                <td>{{ formNextStep.submit(class='btn btn-sm btn-warning btn-block') }}</td></tr>
            {% endfor %}

            </tbody>
        </table>
        </div>
    </form>
        <!-- *********************** ORDER MANAGEMENT BUTTON ************************* -->
                <div class="dropdown">
                    <a class="btn btn-lg btn-warning btn-block' pull-right"  id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Manage your order
                    </a>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        {% for order in orders %}
                        <a class="dropdown-item" href="/order_management_menu" onclick="order_session({{ order.order_id }})">{{ order.order_description }}</a>
                        {% endfor %}
                    </div>
                </div>

        <!-- *********************** CREATE NEW  ORDER BUTTON ************************* -->

                <div style="margin: 0px 2px 0px 2px;"></div> <!-- doesnt work -->
                {% if session['type'] == 'COMPANY' %}
                    <a class="btn btn-lg btn-warning btn-block' pull-right" href="/order_creation">Create new order</a>
                {% endif %}

</div>
</div>

{% endblock %}
